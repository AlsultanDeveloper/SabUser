# ุฏููู ุงุฎุชุจุงุฑ ุณุฑูุน - ูุดููุฉ ูุงุฆูุฉ ุงูุฃูููุงุช

## ูุง ุงูุฐู ุชู ุชุญุณูููุ

### โ ุฅุถุงูุฉ ูุนูููุงุช ุชุตุญูุญ ููุตูุฉ
ุงูุขู ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ูุงุฆูุฉ ุงูุฃูููุงุชุ ุณุชุธูุฑ ูุนูููุงุช ุชูุตูููุฉ ูู ุณุฌู ุงูุชุทุจูู:

```
๐ Auth Debug: {
  hasUser: true,
  userUid: "abc123...",
  hasCurrentUser: true,
  currentUserUid: "abc123...",
  match: true
}
```

### โ ุชุญุฏูุซ ุชููุงุฆู ููู Token
ูุจู ูู ุนูููุฉุ ูุชู ุชุญุฏูุซ ุฑูุฒ ุงููุตุงุฏูุฉ:
```
โ Token refreshed successfully
```

### โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ุฅุฐุง ูู ุชูู ูุณุฌู ุฏุฎูู: ุฑุณุงูุฉ ุชุทูุจ ุชุณุฌูู ุงูุฏุฎูู ูุน ุฒุฑ
- ุฅุฐุง ุงูุชูุช ุงูุฌูุณุฉ: ุฑุณุงูุฉ ุชุทูุจ ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู
- ุฎูุงุฑุงุช: ุฅูุบุงุก ุฃู ุงูุฐูุงุจ ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

## ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุฉ 1: ุดุบู ุงูุชุทุจูู
```powershell
npx expo start --clear
```

### ุงูุฎุทูุฉ 2: ุฑุงูุจ ุงูุณุฌูุงุช
ุงูุชุญ ูุญุฏุฉ ุงูุชุญูู ูุฑุงูุจ ุงูุฑุณุงุฆู ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ูุงุฆูุฉ ุงูุฃูููุงุช

### ุงูุฎุทูุฉ 3: ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

#### ุงุฎุชุจุงุฑ 1: ุจุฏูู ุชุณุฌูู ุฏุฎูู โ
1. ุงูุชุญ ุงูุชุทุจูู
2. ูุง ุชุณุฌู ุฏุฎูู
3. ุงุฐูุจ ูุฃู ููุชุฌ
4. ุงุถุบุท ุนูู ุฒุฑ ุงูููุจ (ูุงุฆูุฉ ุงูุฃูููุงุช)

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุฑุณุงูุฉ: "ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูุฅุถุงูุฉ ุงูููุชุฌุงุช ุฅูู ูุงุฆูุฉ ุงูุฃูููุงุช"
- ุฒุฑุงู: "ุฅูุบุงุก" ู "ุชุณุฌูู ุงูุฏุฎูู"
- ุงูุถุบุท ุนูู "ุชุณุฌูู ุงูุฏุฎูู" ููููู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

#### ุงุฎุชุจุงุฑ 2: ูุน ุชุณุฌูู ุฏุฎูู โ
1. ุณุฌู ุฏุฎูู (Email, Google, ุฃู Apple)
2. ุงุฐูุจ ูุฃู ููุชุฌ
3. ุงุถุบุท ุนูู ุฒุฑ ุงูููุจ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ ูู ุงูุณุฌู:**
```
๐ Auth Debug: {
  hasUser: true,
  userUid: "...",
  hasCurrentUser: true,
  currentUserUid: "...",
  match: true
}
โ Token refreshed successfully
โ Added to wishlist: [product-id]
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ ูู ุงูุชุทุจูู:**
- ุฒุฑ ุงูููุจ ูุชุบูุฑ (ููุชูุฆ ุฃู ููุฑุบ)
- ูุง ุชูุฌุฏ ุฑุณุงุฆู ุฎุทุฃ

#### ุงุฎุชุจุงุฑ 3: ูุญุต ุญุงูุฉ ุนุฏู ุงูุชุฒุงูู ๐
ุฅุฐุง ุฑุฃูุช ูู ุงูุณุฌู:
```
โ๏ธ User context exists but Firebase Auth currentUser is null
โ๏ธ This usually means the auth state is not synced
```

**ุงูุญู:**
1. ุงุถุบุท ุนูู "ุชุณุฌูู ุงูุฏุฎูู" ูู ุงูุฑุณุงูุฉ
2. ุฃู ุณุฌู ุฎุฑูุฌ ุซู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู

## ูุงุฐุง ุชุจุญุซ ุนูู ูู ุงูุณุฌูุงุชุ

### ุนูุงูุงุช ุงููุฌุงุญ โ
```
๐ Auth Debug: { ... match: true }
โ Token refreshed successfully
โ Added to wishlist: xxx
```
ุฃู
```
โ Removed from wishlist: xxx
```

### ุนูุงูุงุช ุงููุดุงูู โ๏ธ

#### ุงููุดููุฉ 1: User ุบูุฑ ููุฌูุฏ
```
๐ Auth Debug: {
  hasUser: false,
  ...
}
```
**ุงูุญู:** ุณุฌู ุฏุฎูู

#### ุงููุดููุฉ 2: ุนุฏู ุชุฒุงูู
```
๐ Auth Debug: {
  hasUser: true,
  hasCurrentUser: false,
  ...
}
```
**ุงูุญู:** ุณุฌู ุฎุฑูุฌ ุซู ุฏุฎูู

#### ุงููุดููุฉ 3: ูุดู ุชุญุฏูุซ Token
```
โ Failed to refresh token: ...
```
**ุงูุญู:** ุงูุฌูุณุฉ ููุชููุฉุ ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู

#### ุงููุดููุฉ 4: ุฎุทุฃ ูู ุงูุตูุงุญูุงุช
```
โ Error code: permission-denied
```
**ุงูุญู:** ุชุฃูุฏ ูู ุฃูู ูุณุฌู ุฏุฎูู ุจุดูู ุตุญูุญ

## ุงููููุงุช ุงููุนุฏูุฉ

| ุงูููู | ุงูุชุนุฏูู |
|------|---------|
| `app/search.tsx` | ุฅุถุงูุฉ ูุญุต Token ูุชุตุญูุญ ููุตู |
| `app/(tabs)/home.tsx` | ุฅุถุงูุฉ ูุญุต Token ูุชุตุญูุญ ููุตู |
| `constants/firestore.ts` | ูุญุต ูุณุจู ูููุตุงุฏูุฉ |

## ุฅุฐุง ุธูุฑุช ุฑุณุงูุฉ ุฎุทุฃ

### ุงูุฎุทุฃ: "You must be logged in to perform this action"

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. โ ุบูุฑ ูุณุฌู ุฏุฎูู โ ุณุฌู ุฏุฎูู
2. โ ุงูุฌูุณุฉ ููุชููุฉ โ ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
3. โ ุนุฏู ุชุฒุงูู Auth โ ุณุฌู ุฎุฑูุฌ ุซู ุฏุฎูู
4. โ ูุดููุฉ ูู ุงูุดุจูุฉ โ ุชุญูู ูู ุงูุงุชุตุงู

**ุงูุญู ุงูุณุฑูุน:**
```
1. ุณุฌู ุฎุฑูุฌ ูู ุงูุชุทุจูู
2. ุฃุบูู ุงูุชุทุจูู ุชูุงูุงู
3. ุงูุชุญู ูุฑุฉ ุฃุฎุฑู
4. ุณุฌู ุฏุฎูู
5. ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู
```

## ูุนูููุงุช ูููุฏุฉ ููุชุตุญูุญ

ุนูุฏ ุงูุฅุจูุงุบ ุนู ูุดููุฉุ ูุฏู:

1. **ุงูุณุฌูุงุช ูู ูุญุฏุฉ ุงูุชุญูู** (ุฎุงุตุฉ ุฑุณุงุฆู ๐ Auth Debug)
2. **ููุทุฉ ุดุงุดุฉ ูู ุงูุฎุทุฃ**
3. **ุฎุทูุงุช ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงููุดููุฉ:**
   - ูู ุฃูุช ูุณุฌู ุฏุฎููุ
   - ุทุฑููุฉ ุชุณุฌูู ุงูุฏุฎูู (Email/Google/Apple)
   - ูุชู ุญุฏุซุช ุงููุดููุฉุ
4. **ูุนูููุงุช ุงูุฌูุงุฒ:**
   - Android ุฃู iOS
   - ูุญุงูู ุฃู ุฌูุงุฒ ุญูููู
   - ุฅุตุฏุงุฑ ุงูุชุทุจูู

## ุงูุฎูุงุตุฉ

ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ:

1. โ **ูุญุต ูุฒุฏูุฌ** ูููุตุงุฏูุฉ (App Context + Firebase Auth)
2. โ **ุชุญุฏูุซ ุชููุงุฆู** ูุฑูุฒ ุงููุตุงุฏูุฉ ูุจู ูู ุนูููุฉ
3. โ **ูุนูููุงุช ุชุตุญูุญ ููุตูุฉ** ูุชุดุฎูุต ุงููุดุงูู ุจุณุฑุนุฉ
4. โ **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** ูุน ุฎูุงุฑุงุช ููุญู
5. โ **ุฃุฒุฑุงุฑ ุณุฑูุนุฉ** ููุงูุชูุงู ูุชุณุฌูู ุงูุฏุฎูู

ูุฐุง ูุฌุจ ุฃู ูุญู ุงููุดููุฉ ููุงุฆูุงู! ๐
