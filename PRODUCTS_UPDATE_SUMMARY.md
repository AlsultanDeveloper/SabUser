# โ ุงูุชุญุฏูุซุงุช - ุฅุตูุงุญ ูุดููุฉ ุนุฑุถ ุงูููุชุฌุงุช

**ุงูุชุงุฑูุฎ:** 2 ููููุจุฑ 2025

## ๐ฏ ุงููุดููุฉ ุงูุฃุตููุฉ

ุงูุชุทุจูู ูุงู **ูุงุฑุบุงู ููุง ูุนุฑุถ ุฃู ููุชุฌ** ุฑุบู ูุฌูุฏ **4362 ููุชุฌ** ูู Firebase.

### ุงูุณุจุจ:
1. โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุงูุช ุชุทูุจ ููุท ุงูููุชุฌุงุช ุงููููุฒุฉ `featured: true`
2. โ ูุนุธู ุงูููุชุฌุงุช ูุง ุชุญุชูู ุนูู ุญูู `featured`
3. โ ูุงู ูุชู ุงุณุชุฎุฏุงู `subcategoryName` ููููุชุฑุฉุ ููู ุบูุฑ ููุซูู (ูููู ุฃู ูููู ุจุงูุนุฑุจูุฉ ุฃู ุงูุฅูุฌููุฒูุฉ)

## โ ุงูุญู ุงููุทุจู

### 1. ุชุนุฏูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`home.tsx`)
**ูุจู:**
```typescript
const { products: featuredProducts, loading: productsLoading } = useProducts({ 
  featured: true,  // โ ูุทูุจ ููุท ุงูููุชุฌุงุช ุงููููุฒุฉ
  limit: 10 
});
```

**ุจุนุฏ:**
```typescript
const { products: featuredProducts, loading: productsLoading } = useProducts({ 
  limit: 20  // โ ูุทูุจ ุฃุญุฏุซ 20 ููุชุฌ ุจุฏูู ุดุฑุท featured
});
```

### 2. ุชุญุณูู ุฏุงูุฉ ุฌูุจ ุงูููุชุฌุงุช (`useFirestore.ts`)

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ ุฏุนู `subcategoryId` ุจุฏูุงู ูู ุงูุงุนุชูุงุฏ ููุท ุนูู `subcategoryName`
- โ ุฅุถุงูุฉ console logs ููุณุงุนุฏุชู ูู ุชุชุจุน ุนุฏุฏ ุงูููุชุฌุงุช
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูููุชุฑุฉ

**ุงูููุฏ ุงูุฌุฏูุฏ:**
```typescript
interface UseProductsOptions {
  categoryId?: string;
  subcategoryId?: string;     // โ ุฌุฏูุฏ: ุงุณุชุฎุฏุงู ID ุจุฏูุงู ูู ุงูุงุณู
  subcategoryName?: string;    // โ ุจุงูู ููุชูุงูู
  featured?: boolean;
  limit?: number;
}

// ูู ุฏุงูุฉ fetchProducts:
if (options.subcategoryId && data.subcategoryId !== options.subcategoryId) {
  return; // ุชุฎุทู ุงูููุชุฌุงุช ุงูุชู ูุง ุชุทุงุจู subcategoryId
}

if (options.subcategoryName && data.subcategoryName !== options.subcategoryName) {
  return; // ุชุฎุทู ุงูููุชุฌุงุช ุงูุชู ูุง ุชุทุงุจู subcategoryName
}
```

### 3. ุฅุถุงูุฉ `subcategoryId` ุฅูู Product Type

**ูู `types/index.ts`:**
```typescript
export interface Product {
  // ...
  categoryId: string;           // ูุนุฑู ุงููุฆุฉ ุงูุฑุฆูุณูุฉ
  subcategoryId?: string;       // โ ุฌุฏูุฏ: ูุนุฑู ุงููุฆุฉ ุงููุฑุนูุฉ
  subcategoryName?: string;     // ุงุณู ุงููุฆุฉ ุงููุฑุนูุฉ (ููุชูุงูู)
  // ...
}
```

### 4. ุชุนุฏูู ุตูุญุฉ ุงููุฆุงุช (`category/[id].tsx`)

**ูุจู:**
```typescript
// ูุงู ููุฑุฑ ุงุณู ุงููุฆุฉ ุงููุฑุนูุฉ (ูุดููุฉ ูุน ุงููุบุงุช ุงููุฎุชููุฉ)
router.push({
  pathname: '/category-products/[categoryId]/[subcategoryId]',
  params: {
    categoryId: id,
    subcategoryId: encodeURIComponent(subcategoryName), // โ
  },
});
```

**ุจุนุฏ:**
```typescript
// ุงูุขู ููุฑุฑ ID ุงููุฆุฉ ุงููุฑุนูุฉ (ุซุงุจุช ููุง ูุชุบูุฑ)
router.push({
  pathname: '/category-products/[categoryId]/[subcategoryId]',
  params: {
    categoryId: id,
    subcategoryId: subcategory.id, // โ
  },
});
```

### 5. ุชุญุฏูุซ ุตูุญุฉ ุนุฑุถ ุงูููุชุฌุงุช (`category-products/[categoryId]/[subcategoryId].tsx`)

**ุงูุชุบููุฑุงุช:**
- โ ุงุณุชุฎุฏุงู `subcategoryId` ุจุฏูุงู ูู `subcategoryName`
- โ ุฌูุจ ูุนูููุงุช ุงููุฆุฉ ูุนุฑุถ ุงุณู ุงููุฆุฉ ุงููุฑุนูุฉ ุจุดูู ุตุญูุญ
- โ ุฏุนู ุงููุบุชูู (ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ) ุชููุงุฆูุงู

## ๐ฆ ูููุงุช ุฌุฏูุฏุฉ ุชู ุฅูุดุงุคูุง

### 1. `PRODUCTS_STRUCTURE_GUIDE.md`
ุฏููู ุดุงูู ูุดุฑุญ:
- ๐๏ธ ุจููุฉ Firebase (categories โ subcategory โ products)
- โ ููููุฉ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ ุจุดูู ุตุญูุญ
- ๐ ููููุฉ ุงูุชุญูู ูู ุฑุจุท ุงูููุชุฌุงุช
- ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ
- ๐ ุฌููุน ุงูุญููู ุงููุชุงุญุฉ ููููุชุฌ

### 2. `scripts/update-products-with-subcategory-id.js`
ุณูุฑูุจุช ูุชุญุฏูุซ ุงูููุชุฌุงุช ุงููุฏููุฉ ุชููุงุฆูุงู:
- ๐ ูุถูู `subcategoryId` ูุฌููุน ุงูููุชุฌุงุช
- ๐ ูุนุฑุถ ุฅุญุตุงุฆูุงุช ูุจู ูุจุนุฏ ุงูุชุญุฏูุซ
- โ ูุณุชุฎุฏู Firestore batches ููุฃุฏุงุก ุงูุฃูุถู
- โ๏ธ ูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุจุดูู ุขูู

### 3. `scripts/UPDATE_PRODUCTS_README.md`
ุดุฑุญ ูุงูู ูููููุฉ ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช:
- ๐ ุฎุทูุงุช ุงูุชุดุบูู
- โ๏ธ ุงุญุชูุงุทุงุช ุงูุฃูุงู
- ๐ง ุญู ุงููุดุงูู
- ๐ ุฃูุซูุฉ ุนูููุฉ

## ๐จ ุชุญุณููุงุช UI

### ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
- โ ุนุฑุถ skeleton loading ุฃุซูุงุก ุชุญููู ุงูููุชุฌุงุช
- โ ุฑุณุงูุฉ ูุงุถุญุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ููุชุฌุงุช
- โ ุฃููููุฉ ุฌูููุฉ ููุตูุญุฉ ุงููุงุฑุบุฉ
- โ ุนุฑุถ ุฃุญุฏุซ 20 ููุชุฌ ุจุดูู ุงูุชุฑุงุถู

### ุตูุญุฉ ุงูููุชุฌุงุช:
- โ ุนุฑุถ ุงุณู ุงููุฆุฉ ุงููุฑุนูุฉ ุงูุตุญูุญ
- โ ุฏุนู ุงููุบุชูู ุชููุงุฆูุงู
- โ ุนุฏุงุฏ ุงูููุชุฌุงุช
- โ Pull to refresh

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุชุบููุฑุงุช:

### ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
```
๐ฆ ุฌุงุฑู ุฌูุจ ุงูููุชุฌุงุช ูู Firebase...
๐ ุนุฏุฏ ุงูููุชุฌุงุช ุงููุณุชุฑุฌุนุฉ: 20
โ ุชู ุชุญููู 20 ููุชุฌ ุจูุฌุงุญ ูู Firebase
```

### ุนูุฏ ุงุฎุชูุงุฑ ูุฆุฉ ูุฑุนูุฉ:
```
๐ฆ ุฌุงุฑู ุฌูุจ ุงูููุชุฌุงุช ูู Firebase...
๐ ุนุฏุฏ ุงูููุชุฌุงุช ุงููุณุชุฑุฌุนุฉ: 150
โ ุชู ุชุญููู 150 ููุชุฌ ุจูุฌุงุญ ูู Firebase
```

## ๐จ ุฎุทูุงุช ูููุฉ ูููุทูุฑ

### 1. ุชุญุฏูุซ ุงูููุชุฌุงุช ุงููุฏููุฉ (ุฅูุฒุงูู)

ุฌููุน ุงูููุชุฌุงุช ุงูุญุงููุฉ **ูุฌุจ** ุฃู ุชุญุชูู ุนูู `subcategoryId`. ูุฏูู ุฎูุงุฑุงู:

#### ุงูุฎูุงุฑ 1: ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช (ููุตู ุจู)
```bash
# ุชุซุจูุช firebase-admin
npm install firebase-admin

# ุงูุญุตูู ุนูู Service Account Key ูู Firebase Console
# ูุถุนู ูู scripts/serviceAccountKey.json

# ุชุดุบูู ุงูุณูุฑูุจุช
node scripts/update-products-with-subcategory-id.js
```

#### ุงูุฎูุงุฑ 2: ุชุญุฏูุซ ูุฏูู (ููุฃุนุฏุงุฏ ุงูููููุฉ)
1. ุงูุชุญ Firebase Console
2. ุงุฐูุจ ุฅูู Firestore โ products
3. ููู ููุชุฌุ ุฃุถู ุญูู `subcategoryId` ุจูููุฉ Document ID ูู ุงููุฆุฉ ุงููุฑุนูุฉ

### 2. ุฅุถุงูุฉ ููุชุฌุงุช ุฌุฏูุฏุฉ

ุนูุฏ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏุ ุชุฃูุฏ ูู ูุฌูุฏ:
```json
{
  "categoryId": "ID_ุงููุฆุฉ_ุงูุฑุฆูุณูุฉ",
  "subcategoryId": "ID_ุงููุฆุฉ_ุงููุฑุนูุฉ",
  "name": { "ar": "...", "en": "..." },
  "price": 100,
  // ... ุจุงูู ุงูุญููู
}
```

ุงูุฑุฃ `PRODUCTS_STRUCTURE_GUIDE.md` ููุชูุงุตูู ุงููุงููุฉ.

### 3. Firebase Indexes (ุงุฎุชูุงุฑู ููุฃุฏุงุก)

ุฃุถู ูุฐู ุงูู indexes ูู Firebase Console:

```json
{
  "indexes": [
    {
      "collectionGroup": "products",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "categoryId", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },
    {
      "collectionGroup": "products",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "subcategoryId", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    }
  ]
}
```

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุฑ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
- โ ูุฌุจ ุฃู ุชุธูุฑ 20 ููุชุฌ ุนูู ุงูุฃูู
- โ Skeleton loading ูุธูุฑ ุฃุซูุงุก ุงูุชุญููู
- โ ุงูุตูุฑ ุชุญูู ุจุดูู ุตุญูุญ

### 2. ุงุฎุชุจุฑ ุงูุชููู:
- โ ุงุถุบุท ุนูู ูุฆุฉ ุฑุฆูุณูุฉ โ ูุฌุจ ุฃู ุชุธูุฑ ุงููุฆุงุช ุงููุฑุนูุฉ
- โ ุงุถุบุท ุนูู ูุฆุฉ ูุฑุนูุฉ โ ูุฌุจ ุฃู ุชุธูุฑ ุงูููุชุฌุงุช
- โ ุนุฏุงุฏ ุงูููุชุฌุงุช ุตุญูุญ

### 3. ุฑุงูุจ Console:
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก
- โ ุฑุณุงุฆู console ุชุธูุฑ ุนุฏุฏ ุงูููุชุฌุงุช ุงููุญููุฉ

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### ูููุงุช ุฑุฆูุณูุฉ:
- โ `app/(tabs)/home.tsx` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ `hooks/useFirestore.ts` - ุฏูุงู ุฌูุจ ุงูุจูุงูุงุช
- โ `types/index.ts` - ุชุนุฑููุงุช TypeScript
- โ `app/category/[id].tsx` - ุตูุญุฉ ุงููุฆุงุช
- โ `app/category-products/[categoryId]/[subcategoryId].tsx` - ุตูุญุฉ ุงูููุชุฌุงุช

### ูููุงุช ุฌุฏูุฏุฉ:
- โ `PRODUCTS_STRUCTURE_GUIDE.md` - ุฏููู ุงูุจููุฉ
- โ `scripts/update-products-with-subcategory-id.js` - ุณูุฑูุจุช ุงูุชุญุฏูุซ
- โ `scripts/UPDATE_PRODUCTS_README.md` - ุดุฑุญ ุงูุณูุฑูุจุช
- โ `PRODUCTS_UPDATE_SUMMARY.md` - ูุฐุง ุงูููู

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ **ุดุบู ุงูุชุทุจูู** ูุชุฃูุฏ ูู ุธููุฑ ุงูููุชุฌุงุช
2. โ **ุดุบู ุงูุณูุฑูุจุช** ูุชุญุฏูุซ ุงูููุชุฌุงุช ุงููุฏููุฉ (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
3. โ **ุงุฎุชุจุฑ ุงูุชููู** ุจูู ุงููุฆุงุช ูุงููุฆุงุช ุงููุฑุนูุฉ
4. โ **ุงูุฑุฃ ุงูุฏููู** (`PRODUCTS_STRUCTURE_GUIDE.md`) ูุจู ุฅุถุงูุฉ ููุชุฌุงุช ุฌุฏูุฏุฉ

## ๐ก ูุตุงุฆุญ ุฅุถุงููุฉ

### ููุฃุฏุงุก ุงูุฃูุถู:
- ุงุณุชุฎุฏู ุตูุฑ WebP ูุถุบูุทุฉ
- ุญุฌู ุงูุตูุฑุฉ ุงููุซุงูู: 800x800 ุจูุณู
- ุงุณุชุฎุฏู Firebase Storage ููุตูุฑ

### ููุตูุงูุฉ:
- ุฑุงุฌุน console logs ุจุงูุชุธุงู
- ุชุฃูุฏ ูู ุตุญุฉ ุงูู IDs ูุจู ุฅุถุงูุฉ ููุชุฌุงุช
- ุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู Firebase ุจุงูุชุธุงู

## ๐ ุงููุดุงูู ุงููุญุชููุฉ ูุญููููุง

### ุงูููุชุฌุงุช ูุง ุชุฒุงู ูุง ุชุธูุฑุ
1. ุชุฃูุฏ ูู ุชุดุบูู ุงูุณูุฑูุจุช ูุชุญุฏูุซ ุงูููุชุฌุงุช ุงููุฏููุฉ
2. ุชุญูู ูู Firebase Rules (ูุฌุจ ุฃู ุชุณูุญ ุจุงููุฑุงุกุฉ)
3. ุงูุชุญ Developer Console ูุงุจุญุซ ุนู ุฃุฎุทุงุก

### ุงูููุชุฑุฉ ูุง ุชุนููุ
1. ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูููุชุฌุงุช ูุฏููุง `categoryId` ู `subcategoryId`
2. ุชุญูู ูู ุฃู ุงูู IDs ุตุญูุญุฉ ููุทุงุจูุฉ

### ุงูุตูุฑ ูุง ุชุธูุฑุ
1. ุชุฃูุฏ ูู ุฃู ุฑูุงุจุท ุงูุตูุฑ ุตุญูุญุฉ
2. ุชุญูู ูู Firebase Storage Rules

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู console logs ูู ุงูุชุทุจูู
2. ุฑุงุฌุน ููู `PRODUCTS_STRUCTURE_GUIDE.md`
3. ุงูุฑุฃ `scripts/UPDATE_PRODUCTS_README.md`

---

**ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ! ๐**

ุงูุขู ุงูุชุทุจูู ูุนุฑุถ ุงูููุชุฌุงุช ุจุดูู ุตุญูุญ ูุน ุฏุนู ูุงูู ูููุฆุงุช ูุงููุฆุงุช ุงููุฑุนูุฉ.
